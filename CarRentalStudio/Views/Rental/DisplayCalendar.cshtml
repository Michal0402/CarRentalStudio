<h1>Wybierz Daty Wynajmu</h1>
<form method="post" asp-action="CheckAvailability">
    <input type="hidden" name="carId" value="@Model.CarId" />

    <label for="startDate">Data początkowa:</label>
    <input type="date" id="startDate" name="startDate" required />

    <label for="endDate">Data końcowa:</label>
    <input type="date" id="endDate" name="endDate" required />

    <button type="submit">Sprawdź Dostępność</button>
</form>

<script>
    document.querySelector("form").addEventListener("submit", async (e) => {
        e.preventDefault();

        const form = e.target;
        const response = await fetch(form.action, {
            method: "POST",
            body: new FormData(form),
        });
        const result = await response.json();

        const resultDiv = document.getElementById("availabilityResult");

        if (result && result.available) {
            // Przekierowanie do strony potwierdzenia
            window.location.href = result.redirectUrl;
        } else if (result && result.message) {
            // Wyświetlanie komunikatu o niedostępności samochodu
            resultDiv.innerText = result.message;
        } else {
            resultDiv.innerText = "Wystąpił błąd. Spróbuj ponownie.";
        }
    });
</script>

